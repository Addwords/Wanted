<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="team">
	<select id="selectTeamInfo" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
			SELECT
				TEAM_ID,
				L_EMAIL,
			    TEAM_NAME,
			    TEAM_IMG,
			    TEAM_EXP
			FROM
			    TEAM
			WHERE
				TEAM_ID=#{IDX}
		]]>
	</select>
	<select id="selectTeamMember" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
			SELECT
			    TM_EMAIL,
			    TM_ROLE,
			    MEMBER_IMG,
                TEAM_NAME,
                TEAM_IMG,
                MEMBER_NAME
			FROM
			    TEAM_MEMBER tm,MEMBER m,TEAM t
			WHERE
				tm.TM_EMAIL=m.MEMBER_EMAIL
                AND
                tm.TEAM_ID=t.TEAM_ID 
		]]>
	        <if test="ROLE!=null">  
        		AND
        		TM_ROLE LIKE '%'||#{ROLE}
        	</if>
	</select>
	<select id="selectMemberInfo" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
			SELECT
				MEMBER_NAME,
				MEMBER_EMAIL,
				MEMBER_IMG
			FROM
			    MEMBER
			WHERE
				MEMBER_EMAIL=#{SEARCH_MEMBER_EMAIL}
		]]>
	</select>
</mapper>