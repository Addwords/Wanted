<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="team">
	<select id="selectTeamInfo" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
			SELECT
				TEAM_ID,
				L_EMAIL,
			    TEAM_NAME,
			    TEAM_IMG,
			    TEAM_EXP
			FROM
			    TEAM
			WHERE
				TEAM_ID=#{IDX}
		]]>
	</select>
	<select id="selectTeamMember" parameterType="hashmap"
		resultType="hashmap">
		<![CDATA[
			SELECT
			    TM_EMAIL,
			    TM_ROLE,
			    MEMBER_IMG,
                TEAM_NAME,
                TEAM_IMG,
                MEMBER_NAME
			FROM
			    TEAM_MEMBER tm,MEMBER m,TEAM t
			WHERE
				tm.TM_EMAIL=m.MEMBER_EMAIL
                AND
                tm.TEAM_ID=t.TEAM_ID 
		]]>
		<if test="ROLE!=null">
			AND
			TM_ROLE LIKE '%'||#{ROLE}
		</if>
	</select>
	<select id="selectMemberInfo" parameterType="hashmap"
		resultType="hashmap">
		<![CDATA[
			SELECT
				MEMBER_NAME,
				MEMBER_EMAIL,
				MEMBER_IMG
			FROM
			    MEMBER
			WHERE
				MEMBER_EMAIL=#{SEARCH_MEMBER_EMAIL}
		]]>
	</select>
	<select id="selectTeamContact" parameterType="hashmap"
		resultType="hashmap">
		<![CDATA[
			SELECT
				L_EMAIL,
			    TEAM_NAME,
			    TEAM_IMG
			FROM
			    TEAM
			WHERE
				TEAM_ID=#{IDX}
		]]>
	</select>
	<select id="selectBoardList" parameterType="hashmap" resultType="hashmap">
	<include refid="common.pagingPre"/>
		<![CDATA[
			SELECT
                ROW_NUMBER() OVER (ORDER BY BOARD_ID DESC) RNUM,
    			BOARD_ID,
   				WRITER_EMAIL,
   				BOARD_TITLE,
    			WRITE_TIME,
    			CONTENT
			FROM
				TEAM_BOARD
			WHERE
				DELETE_GB='N'
			ORDER BY
				BOARD_ID DESC
		]]>
		<include refid="common.pagingPost"/>
	</select>
	<select id="insertBoard" parameterType="hashmap"
		resultType="hashmap">
		<![CDATA[
			INSERT INTO team_board
			(
				BOARD_ID,
				WRITER_EMAIL,
				BOARD_TITLE,
				CONTENT,
				DELETE_GB
			)
			VALUES
			(
				TEAM_BOARD_SEQ.NEXTVAL,
				#{WRITER},
				#{TITLE},
				#{CONTENTS},
				'N'
			)
		]]>
	</select>
</mapper>